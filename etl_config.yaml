# ETL Configuration for TMDb Data Pipeline
# This file controls the automated ETL scheduling and data refresh settings

# Schedule Configuration
# Using APScheduler interval trigger for periodic execution
schedule:
  # How often to run the full ETL (in hours)
  interval_hours: 24
  
  # Alternative: Use cron-style scheduling (uncomment to use instead of interval)
  # cron:
  #   hour: 2
  #   minute: 0
  #   day_of_week: '*'
  
  # Timezone for scheduled jobs
  timezone: 'America/New_York'
  
  # Run ETL immediately on startup
  run_on_startup: true

# Data Fetch Limits
data_limits:
  # Number of popular movies to fetch per run
  movies: 100
  
  # Number of popular TV shows to fetch per run
  shows: 50
  
  # Number of episodes to fetch per season (to limit API calls)
  episodes_per_season: 10
  
  # Maximum cast members to fetch per movie/show
  max_cast: 25

# Data Quality & Cleaning
data_quality:
  # Minimum vote count to include a movie/show
  min_vote_count: 10
  
  # Minimum popularity score
  min_popularity: 1.0
  
  # Remove entries with missing critical fields
  require_poster: true
  require_overview: true
  
  # Clean up entries older than X days with no updates
  cleanup_stale_days: 180

# API Configuration
api:
  # Request timeout in seconds
  timeout: 30
  
  # Delay between API requests (seconds) to respect rate limits
  request_delay: 0.25
  
  # Max retries for failed requests
  max_retries: 3

# Logging
logging:
  level: 'INFO'  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  file: 'etl_scheduler.log'
  max_bytes: 10485760  # 10MB
  backup_count: 5
  
# Database
database:
  # Path to SQLite database (can use env var DATABASE_PATH to override)
  path: 'movie_tracker.db'
  
  # Enable WAL mode for better concurrent access
  enable_wal: true
  
  # Run VACUUM periodically to optimize database
  vacuum_on_completion: false

# Monitoring & Alerts
monitoring:
  # Track ETL metrics
  enable_metrics: true
  
  # Email alerts on failures (requires SMTP configuration)
  email_alerts: false
  smtp_host: 'smtp.gmail.com'
  smtp_port: 587
  alert_email: 'your-email@example.com'

